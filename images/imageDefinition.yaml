$schema: "1.0"
name: "test-img"
image: "microsoftvisualstudio_visualstudioplustools_vs-2022-ent-general-win11-m365-gen2"

tasks:
  - name: powershell
    timeout: 7200
    description: Set up folders
    parameters:
      command: |
        mkdir C:\test

  - name: winget
    description: Install Visual Studio Code
    parameters:
      package: Microsoft.VisualStudioCode

  - name: powershell
    timeout: 7200
    description: Install Winget
    parameters:
      command: |
        Install-Module -Name Microsoft.WinGet.Client -Force -Verbose -AllowClobber -Scope CurrentUser -RequiredVersion 1.9.2411
        Import-Module Microsoft.WinGet.Client
        Install-WinGetPackage -Id Kubernetes.kubectl -Mode Silent -Force -Location C:\test